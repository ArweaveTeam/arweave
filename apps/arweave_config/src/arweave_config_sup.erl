%%%===================================================================
%%%
%%%===================================================================
-module(arweave_config_sup).
-export([start_link/0]).
-export([init/1]).

%%--------------------------------------------------------------------
%%
%%--------------------------------------------------------------------
start_link() ->
	supervisor:start_link({local, ?MODULE}, ?MODULE, []).

%%--------------------------------------------------------------------
%%
%%--------------------------------------------------------------------
init(_Args) ->
	{ok, {supervisor(), children()}}.

%%--------------------------------------------------------------------
%%
%%--------------------------------------------------------------------
supervisor() ->
	#{
		strategy => one_for_all
	 }.

%%--------------------------------------------------------------------
%%
%%--------------------------------------------------------------------
children() -> 
	[
		#{
			id => arweave_config_spec,
			start => {
				arweave_config_spec,
				start_link,
				[arweave_config]
			},
			type => worker
		},
		#{
		  	id => arweave_config_store,
			start => {
				arweave_config_store,
				start_link,
				[]
			},
			type => worker
		}
	].
